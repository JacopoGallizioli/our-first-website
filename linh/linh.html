<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Heart Collector Test</title>
<style>
  html, body {
    margin: 0; padding: 0; height: 100%;
    background: pink;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: Arial, sans-serif;
  }
  #gameContainer {
    text-align: center;
  }
  canvas {
    border: 4px solid #ff3399;
    border-radius: 15px;
    background-color: #eee;
    display: block;
    margin: 0 auto 10px;
  }
  #message {
    color: #a60050;
    font-weight: bold;
  }
</style>
</head>
<body>
<div id="gameContainer">
  <h1>Heart Collector Test</h1>
  <canvas id="gameCanvas" width="600" height="400"></canvas>
  <div id="message"></div>
</div>

<script>
  const canvas = document.getElementById('gameCanvas');
  const ctx = canvas.getContext('2d');

  // Player setup
  const player = { x: 50, y: 50, size: 40, speed: 5 };
  const hearts = [
    { x: 300, y: 200, size: 30, collected: false },
    { x: 500, y: 100, size: 30, collected: false }
  ];

  const keys = {};
  let collectedCount = 0;

  document.addEventListener('keydown', e => keys[e.key] = true);
  document.addEventListener('keyup', e => keys[e.key] = false);

  function drawPlayer() {
    ctx.fillStyle = 'blue';
    ctx.fillRect(player.x, player.y, player.size, player.size);
  }

  function drawHearts() {
    hearts.forEach(h => {
      if (!h.collected) {
        ctx.fillStyle = 'red';
        ctx.beginPath();
        ctx.moveTo(h.x, h.y);
        ctx.arc(h.x - 10, h.y - 10, 15, 0, Math.PI * 2);
        ctx.arc(h.x + 10, h.y - 10, 15, 0, Math.PI * 2);
        ctx.lineTo(h.x, h.y + 20);
        ctx.fill();
      }
    });
  }

  function update() {
    if (keys['ArrowUp']) player.y -= player.speed;
    if (keys['ArrowDown']) player.y += player.speed;
    if (keys['ArrowLeft']) player.x -= player.speed;
    if (keys['ArrowRight']) player.x += player.speed;

    player.x = Math.max(0, Math.min(canvas.width - player.size, player.x));
    player.y = Math.max(0, Math.min(canvas.height - player.size, player.y));

    hearts.forEach(h => {
      if (!h.collected &&
          player.x < h.x + h.size &&
          player.x + player.size > h.x &&
          player.y < h.y + h.size &&
          player.y + player.size > h.y) {
        h.collected = true;
        collectedCount++;
        document.getElementById('message').textContent = `Hearts collected: ${collectedCount}`;
      }
    });
  }

  function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawPlayer();
    drawHearts();
    update();
    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>
</body>
</html>
